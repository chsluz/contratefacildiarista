<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>
	<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
	<script src="https://www.gstatic.com/firebasejs/4.1.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/4.1.1/firebase-auth.js"></script>
	<h:outputScript
			library="js"
			name="firebase.js" />
	<h:form prependId="false">
		<p:growl
			autoUpdate="true"
			id="mensagem" />
		<h:inputHidden
			id="idErroLogin"
			value="#{loginBean.msgErro}" />
		<h:inputHidden
			id="idUsuario"
			value="#{loginBean.idUsuario}" />
		<p:remoteCommand
			name="erroLogin"
			actionListener="#{loginBean.exibirMensagemErro()}" />
		<p:remoteCommand
			name="logarUsuario"
			actionListener="#{loginBean.logar()}">
		</p:remoteCommand>
		<p:remoteCommand
			name="criarUsuario"
			actionListener="#{loginBean.salvar()}">
		</p:remoteCommand>
		<p:panel style="width: 500px">
			<div align="center">
				<h:panelGrid columns="2">
					<h:outputText value="Email:" />
					<p:inputText
						id="email"
						placeholder="teste@teste.com" />
					<h:outputText value="Senha:" />
					<p:password
						id="senha"
						placeholder="********" />
				</h:panelGrid>
				<h:panelGrid columns="2">
					<p:commandButton
						update="mensagem"
						onclick="logar()"
						value="Logar" />
					<p:commandLink
						onstart="PF('dgCadastroUsuario').show()"
						value="Novo? Cadastre-se"
						action="#{loginBean.cadastrarNovo()}" />
				</h:panelGrid>
			</div>
		</p:panel>
	</h:form>
	<p:dialog
		header="Cadastrar novo Usuario"
		widgetVar="dgCadastroUsuario"
		width="800px"
		position="left top"
		resizable="false"
		closable="false"
		height="600px;"
		minHeight="40">
		<h:form prependId="false">
			<div class="ui-fluid">
				<div class="ui-g">
					<p:panelGrid
						layout="grid"
						columnClasses="ui-grid-col-12"
						style="overflow:auto;"
						columns="1">
						<p:fieldset legend="Dados Usuário">
							<p:panelGrid
								columns="4"
								layout="grid"
								columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-3,ui-grid-col-3">
								<h:outputText value="Email:" />
								<p:inputText
									id="emailCadastro"
									placeholder="teste@teste.com" />
								<h:outputText value="Senha:" />
								<p:password
									id="senhaCadastro"
									placeholder="********" />
								<h:outputText value="Nome:" />
								<p:inputText
									value="#{loginBean.usuario.nome}"
									id="nome"
									placeholder="João da Silva" />
								<h:outputText value="Cpf:" />
								<p:inputMask
									value="#{loginBean.usuario.cpf}"
									id="cpf"
									mask="999.999.999-99"
									placeholder="999.999.999-99" />

								<h:outputText value="Telefone:" />
								<p:inputText
									value="#{loginBean.usuario.telefone}"
									id="telefone" />
								<h:outputText value="Data Nasc:" />
								<p:inputMask
									value="#{loginBean.usuario.dataNascimento}"
									id="dataNasc"
									mask="99/99/9999"
									placeholder="99/99/9999" />
							</p:panelGrid>
						</p:fieldset>


						<p:fieldset legend="Endereço">
							<p:panelGrid
								columns="4"
								layout="grid"
								columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-3,ui-grid-col-3">
								<h:outputText value="Rua:" />
								<p:inputText
									placeholder="Rua João da silva"
									value="#{loginBean.usuario.endereco.rua}"
									id="rua" />
								<h:outputText value="Número:" />
								<p:inputMask
									id="numero"
									value="#{loginBean.usuario.endereco.numero}" />

								<h:outputText value="Cep:" />
								<p:inputMask
									mask="99.999-999"
									placeholder="99.999-999"
									value="#{loginBean.usuario.endereco.cep}"
									id="cep" />
								<h:outputText value="Complemento:" />
								<p:inputText value="#{loginBean.usuario.endereco.complemento}" />

								<p:outputLabel
									value="Estado"
									for="estado" />
								<p:selectOneMenu
									style="width: 160px;"
									id="estado">
									<f:selectItem itemLabel="Selecione" />
									<f:selectItems value="#{loginBean.listarEstados}" />
								</p:selectOneMenu>

								<p:outputLabel
									value="Cidade"
									for="cidade" />
								<p:selectOneMenu
									style="width: 160px;"
									id="cidade">
									<f:selectItem itemLabel="Selecione" />
									<f:selectItems value="#{loginBean.listarCidades}" />
								</p:selectOneMenu>

								<p:outputLabel
									value="Bairro"
									for="bairro" />
								<p:selectOneMenu
									style="width: 160px;"
									id="bairro">
									<f:selectItem itemLabel="Selecione" />
									<f:selectItems value="#{loginBean.listarBairros}" />
								</p:selectOneMenu>
							</p:panelGrid>
						</p:fieldset>
						<p:fieldset legend="Tipo Usuário">
							<h:outputText value="Tipo de Usuario:" />
							<p:selectOneMenu
								value="#{loginBean.usuario.tipoUsuario}"
								style="width:175px">
								<f:selectItems
									value="#{loginBean.tiposUsuario}"
									var="tipo"
									itemLabel="#{tipo.descricao}"
									itemValue="#{tipo}" />
							</p:selectOneMenu>
						</p:fieldset>

					</p:panelGrid>
				</div>
			</div>


			<h:panelGrid columns="2">
				<p:commandButton
					onclick="PF('dgCadastroUsuario').hide()"
					value="Cancelar" />
				<p:commandButton
					onerror="excluirLogin()"
					onclick="createLogin()"
					value="Salvar" />
			</h:panelGrid>
		</h:form>
	</p:dialog>
</body>
</html>
